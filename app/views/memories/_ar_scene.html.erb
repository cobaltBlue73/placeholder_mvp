<a-scene webxr="referenceSpaceType: local;
                requiredFeatures: hit-test,local;
                optionalFeatures: dom-overlay;
                overlayElement: #ar-overlay"
         vr-mode-ui="enterVRButton: #enter-vr-btn"
         ar-hit-test="marker: #ar-marker;
                      referenceSpace: local"
         avatar
         ar-ui-controller
         data-controller="ar-scene"
         data-action="loaded->ar-scene#sceneLoaded
                      ARStart->ar-scene#onARStart
                      doubleTap->ar-scene#doubleTap"
>

  <a-assets>
    <% avatars.each_with_index do |avatar, index| %>
      <%= cl_image_tag(avatar.photo.key, id: "avatar-img-#{index}", crossorigin: "anonymous",
                       transformation: [ { height: 600, crop: 'scale' } ]) %>
    <% end %>
  </a-assets>
  <a id="enter-vr-btn" href="#"></a>
  <a-ring id='ar-marker' rotation="-90 0 0" radius-inner="0.01" radius-outer="0.02"></a-ring>

  <% avatars.each_with_index do |avatar, index| %>
    <a-entity avatar class="ar-avatar" id=<%= "avatar-#{index}" %> visible='false'>
      <a-image src=<%= "#avatar-img-#{index}" %> height="1.75"></a-image>
    </a-entity>
  <% end %>

</a-scene>
